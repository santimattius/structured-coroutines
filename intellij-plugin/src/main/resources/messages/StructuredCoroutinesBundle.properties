# Copyright 2026 Santiago Mattiauda
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0

# Plugin Information
plugin.name=Structured Coroutines
plugin.description=Enforces structured concurrency best practices for Kotlin Coroutines

# Inspection Group
inspection.group.name=Coroutines

# Inspection Display Names
inspection.global.scope.display.name=GlobalScope usage
inspection.main.dispatcher.display.name=Main dispatcher misuse
inspection.scope.reuse.display.name=Scope reuse after cancel
inspection.run.blocking.display.name=runBlocking in suspend function
inspection.unstructured.launch.display.name=Unstructured coroutine launch
inspection.async.without.await.display.name=async without await
inspection.inline.scope.display.name=Inline CoroutineScope creation
inspection.job.in.builder.display.name=Job in builder context
inspection.suspend.in.finally.display.name=Suspend call in finally block
inspection.cancellation.swallowed.display.name=CancellationException swallowed
inspection.cancellation.subclass.display.name=CancellationException subclass (domain error)
inspection.dispatchers.unconfined.display.name=Dispatchers.Unconfined usage
inspection.loop.without.yield.display.name=Loop without cooperation point

# Inspection Descriptions (include rule code and Learn more link; HTML supported in inspection description pane)
inspection.doc.base.url=https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md

inspection.global.scope.description=<html>GlobalScope bypasses structured concurrency and can lead to resource leaks. Use framework scopes (viewModelScope, lifecycleScope), @StructuredScope annotated scopes, or structured builders (coroutineScope, supervisorScope).<br/><br/><b>SCOPE_001</b>. <a href="https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#11-scope_001--using-globalscope-in-production-code">Learn more</a></html>
inspection.main.dispatcher.description=<html>Blocking code on Dispatchers.Main can cause ANRs on Android or freeze the UI. Use Dispatchers.IO for blocking operations.<br/><br/><b>DISPATCH_001</b>. <a href="https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#31-dispatch_001--mixing-blocking-code-with-wrong-dispatchers">Learn more</a></html>
inspection.scope.reuse.description=<html>Cancelling a CoroutineScope and then trying to launch more coroutines in that same scope doesn't work. A cancelled Job doesn't accept new children; subsequent launch/async fail silently.<br/>Use <b>cancelChildren()</b> instead of <b>cancel()</b> if you need to reuse the scope. Apply the quick fix to replace scope.cancel() with scope.coroutineContext.job.cancelChildren().<br/><br/><b>CANCEL_005</b>. <a href="https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#45-cancel_005--reusing-a-cancelled-coroutinescope">Learn more</a></html>
inspection.run.blocking.description=<html>runBlocking blocks the thread and defeats the purpose of coroutines. Use runBlocking only at top level (main, test functions).<br/><br/><b>RUNBLOCK_002</b>. <a href="https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#22-runblock_002--using-runblocking-inside-suspend-functions">Learn more</a></html>
inspection.unstructured.launch.description=<html>Coroutine launched without a structured scope. Use framework scopes, @StructuredScope annotated scopes, or structured builders.<br/><br/><b>SCOPE_003</b>. <a href="https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#13-scope_003--breaking-structured-concurrency">Learn more</a></html>
inspection.async.without.await.description=<html>async creates a Deferred that should be awaited. If you don't need the result, use launch instead.<br/><br/><b>SCOPE_002</b>. <a href="https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#12-scope_002--using-async-without-calling-await">Learn more</a></html>
inspection.inline.scope.description=<html>Creating inline CoroutineScope bypasses structured concurrency. Use a managed scope with proper lifecycle.<br/><br/><b>SCOPE_003</b>. <a href="https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#13-scope_003--breaking-structured-concurrency">Learn more</a></html>
inspection.job.in.builder.description=<html>Using Job() or SupervisorJob() in coroutine builders breaks structured concurrency. Use supervisorScope { } for independent child failures.<br/><br/><b>DISPATCH_004</b>. <a href="https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#34-dispatch_004--passing-job-directly-as-context-to-builders">Learn more</a></html>
inspection.suspend.in.finally.description=<html>Suspend calls in finally blocks may not complete if the coroutine is cancelled. Wrap with withContext(NonCancellable) { }.<br/><br/><b>CANCEL_004</b>. <a href="https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#44-cancel_004--suspendable-cleanup-without-noncancellable">Learn more</a></html>
inspection.cancellation.swallowed.description=<html>Catching Exception without rethrowing CancellationException breaks coroutine cancellation. Handle CancellationException separately.<br/><br/><b>CANCEL_003</b>. <a href="https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#43-cancel_003--swallowing-cancellationexception">Learn more</a></html>
inspection.cancellation.subclass.description=<html>Extending CancellationException for domain errors is not allowed. CancellationException has special semantics in coroutines and doesn't propagate like normal exceptions. Use Exception or RuntimeException for domain errors.<br/><br/><b>EXCEPT_002</b>. <a href="https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#52-except_002--extending-cancellationexception-for-domain-errors">Learn more</a></html>
inspection.dispatchers.unconfined.description=<html>Dispatchers.Unconfined can lead to unpredictable execution and should be avoided except in specific testing scenarios.<br/><br/><b>DISPATCH_003</b>. <a href="https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#33-dispatch_003--abusing-dispatchersunconfined">Learn more</a></html>
inspection.loop.without.yield.description=<html>Loops in suspend functions without cooperation points cannot be cancelled until the loop completes. In suspend functions use currentCoroutineContext().ensureActive(), or yield(), or delay() inside the loop.<br/><br/><b>CANCEL_001</b>. <a href="https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#41-cancel_001--ignoring-cancellation-in-intensive-loops">Learn more</a></html>

# Quick Fix Names
quickfix.replace.global.scope=Replace with {0}
quickfix.replace.global.scope.viewmodel=Replace GlobalScope with viewModelScope
quickfix.replace.global.scope.lifecycle=Replace GlobalScope with lifecycleScope
quickfix.replace.global.scope.coroutinescope=Replace GlobalScope with coroutineScope { }
quickfix.wrap.with.io.dispatcher=Wrap with withContext(Dispatchers.IO)
quickfix.replace.cancel.with.cancel.children=Replace cancel() with cancelChildren()
quickfix.remove.run.blocking=Remove runBlocking
quickfix.add.await=Add .await()
quickfix.convert.async.to.launch=Convert async to launch
quickfix.wrap.with.non.cancellable=Wrap with withContext(NonCancellable)
quickfix.add.cancellation.exception.catch=Add CancellationException catch clause
quickfix.replace.job.with.supervisor.scope=Replace with supervisorScope { }
quickfix.add.ensure.active.in.loop=Add ensureActive() in loop
quickfix.add.current.coroutine.context.ensure.active.in.loop=Add currentCoroutineContext().ensureActive() in loop
quickfix.add.yield.in.loop=Add yield() in loop
quickfix.add.delay.in.loop=Add delay(0) in loop
quickfix.add.cooperation.point.in.loop.family=Add cooperation point in loop
quickfix.change.superclass.to.exception=Change superclass to Exception

# Intention Names
intention.category=Structured Coroutines
intention.migrate.to.viewmodel.scope=Migrate to viewModelScope
intention.migrate.to.viewmodel.scope.description=Migrate coroutine scope to viewModelScope for ViewModel classes
intention.migrate.to.lifecycle.scope=Migrate to lifecycleScope
intention.migrate.to.lifecycle.scope.description=Migrate coroutine scope to lifecycleScope for LifecycleOwner classes
intention.wrap.with.coroutine.scope=Wrap with coroutineScope { }
intention.wrap.with.coroutine.scope.description=Wrap suspend function content with coroutineScope builder
intention.convert.launch.to.async=Convert launch to async
intention.convert.launch.to.async.description=Convert launch call to async for returning a Deferred
intention.extract.suspend.function=Extract suspend function
intention.extract.suspend.function.description=Extract coroutine lambda body to a suspend function

# Gutter Icon Tooltips
gutter.scope.viewmodel=viewModelScope - ViewModel lifecycle
gutter.scope.lifecycle=lifecycleScope - Lifecycle lifecycle
gutter.scope.global=GlobalScope - No lifecycle (danger!)
gutter.scope.coroutine=coroutineScope - Structured scope
gutter.scope.supervisor=supervisorScope - Supervisor scope
gutter.scope.custom=Custom CoroutineScope
gutter.dispatcher.main=Dispatchers.Main - UI thread
gutter.dispatcher.io=Dispatchers.IO - I/O operations
gutter.dispatcher.default=Dispatchers.Default - CPU-intensive
gutter.dispatcher.unconfined=Dispatchers.Unconfined - Unconfined (warning)

# Error Messages (prefix with rule code; include doc link so it appears in problem view/tooltip)
error.doc.base.url=https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md
error.global.scope.usage=[SCOPE_001] GlobalScope.{0} bypasses structured concurrency. See: https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#11-scope_001--using-globalscope-in-production-code
error.main.dispatcher.blocking=[DISPATCH_001] Blocking call on Dispatchers.Main can cause ANR. See: https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#31-dispatch_001--mixing-blocking-code-with-wrong-dispatchers
error.scope.reuse.after.cancel=[CANCEL_005] Scope ''{0}'' is cancelled and then reused. Use the quick fix to replace cancel() with cancelChildren(). See: https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#45-cancel_005--reusing-a-cancelled-coroutinescope
error.run.blocking.in.suspend=[RUNBLOCK_002] runBlocking in suspend function blocks the thread. See: https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#22-runblock_002--using-runblocking-inside-suspend-functions
error.unstructured.launch=[SCOPE_003] Coroutine launched without structured scope. See: https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#13-scope_003--breaking-structured-concurrency
error.async.without.await=[SCOPE_002] async result is never awaited. See: https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#12-scope_002--using-async-without-calling-await
error.inline.scope=[SCOPE_003] CoroutineScope(...).{0} bypasses structured concurrency. See: https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#13-scope_003--breaking-structured-concurrency
error.job.in.builder=[DISPATCH_004] {0}() in coroutine builder breaks structured concurrency. See: https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#34-dispatch_004--passing-job-directly-as-context-to-builders
error.suspend.in.finally=[CANCEL_004] Suspend call in finally may not complete if cancelled. See: https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#44-cancel_004--suspendable-cleanup-without-noncancellable
error.cancellation.swallowed=[CANCEL_003] catch(Exception) may swallow CancellationException. See: https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#43-cancel_003--swallowing-cancellationexception
error.cancellation.subclass=[EXCEPT_002] Extending CancellationException for domain errors is not allowed. Use Exception or RuntimeException. See: https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#52-except_002--extending-cancellationexception-for-domain-errors
error.dispatchers.unconfined=[DISPATCH_003] Dispatchers.Unconfined should be avoided in production. See: https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#33-dispatch_003--abusing-dispatchersunconfined
error.loop.without.yield=[CANCEL_001] Loop in suspend function without cooperation point. Add ensureActive() or yield() to allow cancellation. See: https://github.com/santimattius/structured-coroutines/blob/main/docs/BEST_PRACTICES_COROUTINES.md#41-cancel_001--ignoring-cancellation-in-intensive-loops

# Tool Window - Structured Coroutines view
toolwindow.structured.coroutines=Structured Coroutines
toolwindow.stripe.StructuredCoroutines=Structured Coroutines
view.refresh=Refresh
view.no.file.selected=Open a file and click Refresh to see issues.
view.not.kotlin.file=Current file is not a Kotlin file.
view.no.issues=No Structured Coroutines issues found.
view.column.severity=Severity
view.column.location=Location
view.column.inspection=Inspection
view.column.message=Message
view.severity.error=Error
view.severity.warning=Warning
